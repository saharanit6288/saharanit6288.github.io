(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{205:function(e,t,n){e.exports=n(482)},210:function(e,t,n){},228:function(e,t){},230:function(e,t){},252:function(e,t){},260:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=260},267:function(e,t){},268:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=268},305:function(e,t){},306:function(e,t){},388:function(e,t){},482:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n.n(a),r=n(202),c=n.n(r),i=(n(210),n(20)),u=n(21),o=n(24),l=n(22),h=n(17),m=n(23),d=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).changeView=n.changeView.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"changeView",value:function(){this.props.changeView("signup")}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("button",{className:"chat-button",onClick:this.changeView},"Send a message"))}}]),t}(s.a.Component),b=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={username:""},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.username)}},{key:"render",value:function(){return s.a.createElement("div",{className:"form-container"},s.a.createElement("h1",null,"Let's Talk"),s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},s.a.createElement("label",{htmlFor:"email"},"What is your email?"),s.a.createElement("input",{type:"email",name:"username",onChange:this.handleChange,className:"input"}),s.a.createElement("button",{className:"submit"},"Submit")))}}]),t}(s.a.Component),f=n(204),g=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("ul",{className:"message-list"},this.props.messages.map(function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("h4",{className:"message-sender"},e.senderId),s.a.createElement("p",{className:"message-text"},e.text))}),s.a.createElement("li",null))}}]),t}(s.a.Component),p=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={message:""},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({message:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.message),this.setState({message:""})}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit,className:"input-field"},s.a.createElement("input",{className:"message-input",type:"text",onChange:this.handleChange,value:this.state.message}),s.a.createElement("input",{className:"message-submit",type:"submit",value:"send"}))}}]),t}(s.a.Component),v=n(113),O=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={currentUser:null,currentRoom:{users:[]},messages:[],users:[]},n.addMessage=n.addMessage.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;new v.ChatManager({instanceLocator:"v1:us1:10e8ae01-030d-4622-9440-d1d80bf5cae9",userId:this.props.currentId,tokenProvider:new v.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/10e8ae01-030d-4622-9440-d1d80bf5cae9/token"})}).connect().then(function(t){return e.setState({currentUser:t}),t.subscribeToRoom({roomId:"a16515e7-7153-4473-b938-3fc3d854cbfa",messageLimit:100,hooks:{onMessage:function(t){e.setState({messages:[].concat(Object(f.a)(e.state.messages),[t])})}}})}).then(function(t){e.setState({currentRoom:t,users:t.userIds})}).catch(function(e){return console.log(e)})}},{key:"addMessage",value:function(e){this.state.currentUser.sendMessage({text:e,roomId:this.state.currentRoom.id}).catch(function(e){return console.error("error",e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",{className:"header"},"Let's Talk"),s.a.createElement(g,{messages:this.state.messages}),s.a.createElement(p,{className:"input-field",onSubmit:this.addMessage}))}}]),t}(s.a.Component),j=n(203),w=new(n.n(j).a)({instanceLocator:"v1:us1:10e8ae01-030d-4622-9440-d1d80bf5cae9",key:"7ecb67c6-1eac-4e64-8bcc-99b8d6df77a6:sK1uBrTWxh5USRd8lcjzdaPbx4CLtPVUtV7fSUWYEBQ="}),k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={currentUsername:"",currentId:"",currentView:"ChatMessage"},n.changeView=n.changeView.bind(Object(h.a)(n)),n.createUser=n.createUser.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"createUser",value:function(e){var t=this;w.createUser({id:e,name:e}).then(function(n){t.setState({currentUsername:e,currentId:e,currentView:"chatApp"})}).catch(function(n){400===n.status?t.setState({currentUsername:e,currentId:e,currentView:"chatApp"}):console.log(n.status)})}},{key:"changeView",value:function(e){this.setState({currentView:e})}},{key:"render",value:function(){var e="";return"ChatMessage"===this.state.currentView?e=s.a.createElement(d,{changeView:this.changeView}):"signup"===this.state.currentView?e=s.a.createElement(b,{onSubmit:this.createUser}):"chatApp"===this.state.currentView&&(e=s.a.createElement(O,{currentId:this.state.currentId})),s.a.createElement("div",{className:"App"},e)}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[205,1,2]]]);
//# sourceMappingURL=main.ea79520b.chunk.js.map